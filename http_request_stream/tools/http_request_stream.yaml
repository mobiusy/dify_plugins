identity:
  name: http_request_stream
  author: mobiusy
  label:
    en_US: http_request_stream
    zh_Hans: http_request_stream
    pt_BR: http_request_stream
description:
  human:
    en_US: get stream result from http api, and return stream output for answer node
    zh_Hans: 从 HTTP API 获取流式结果，并为回答节点返回流式输出
    pt_BR: get stream result from http api, and return stream output for answer node
  llm: get stream result from http api, and return stream output for answer node
parameters:
  - name: method
    type: select
    required: true
    default: "GET"
    label:
      en_US: Http request method
      zh_Hans: HTTP 请求方法
    human_description:
      en_US: "The HTTP method to use for the request."
      zh_Hans: "用于请求的 HTTP 方法。"
    llm_description: "The HTTP method to use for the request."
    form: llm
    options:
      - label:
          en_US: GET
          zh_Hans: GET
        value: "GET"
      - label:
          en_US: POST
          zh_Hans: POST
        value: "POST"
      - label:
          en_US: PUT
          zh_Hans: PUT
        value: "PUT"
      - label:
          en_US: DELETE
          zh_Hans: DELETE
        value: "DELETE"
      - label:
          en_US: HEAD
          zh_Hans: HEAD
        value: "HEAD"
      - label:
          en_US: PATCH
          zh_Hans: PATCH
        value: "PATCH"
  - name: url
    type: string
    required: true
    label:
      en_US: URL
      zh_Hans: URL
      pt_BR: URL
    human_description:
      en_US: requested url
      zh_Hans: 请求的 URL
      pt_BR: requested url
    llm_description: 请求的 URL
    form: llm
  - name: body
    type: string
    required: false
    label:
      en_US: Body
      zh_Hans: 主体
      pt_BR: Body
    human_description:
      en_US: request body
      zh_Hans: 请求主体
      pt_BR: request body
    llm_description: 请求主体
    form: llm
  - name: headers
    type: string
    required: false
    label:
      en_US: Headers
      zh_Hans: 请求头
    human_description:
      en_US: "Optional request headers in JSON object string, e.g. {\"Authorization\": \"Bearer xxx\", \"X-Custom\": \"value\"}."
      zh_Hans: "可选的请求头，使用 JSON 对象字符串，例如 {\"Authorization\": \"Bearer xxx\", \"X-Custom\": \"value\"}。"
    llm_description: "Optional request headers as a JSON object string; when provided, they will be merged with default SSE headers."
    form: llm

extra:
  python:
    source: tools/http_request_stream.py
output_schema:
  type: object
  properties:
    stream_text:
      type: string
      description: The stream text generated by the tool
    conversation_id:
      type: string
      description: Extracted conversation id when a chunk matches the pattern "conversation_id/xxxxx"

